# Code Review Issues (2025-10-31)

| Commit | Area | Severity | Issue | Recommended Action |
| --- | --- | --- | --- | --- |
| 88958f34b2b3a659 | `internal/infra/adapters/binance` | Blocker | `Options.Symbols` was removed, `Venue` is hard-coded, and configurable REST/WS base URLs became private fields; existing configs can no longer limit instruments or point at alternate endpoints. | Restore symbol allow-list support and keep venue/base URLs configurable (e.g., by preserving the previous exported fields or adding explicit configuration inputs). |
| dc3f1ded372571eb<br>27b39fa7aa27dc5b | `internal/infra/config` | Blocker | `normalizeProviderAlias` is referenced but not defined, so these revisions do not compile. | Reintroduce the helper (or adjust to the new naming function) and ensure tests cover the normalisation path. |
| c1a6be18f0aad27d | `internal/app/provider/manager.go` | Critical | `extractProviderSettings` copies nested adapter configuration directly into the metadata API, leaking credentials (`api_key`, `api_secret`, passphrase) via the control server. | Filter sensitive keys before exposing metadata, and add tests preventing credential leakage. |
| aac9c32bd5b7dceb | `internal/app/lambda/runtime/manager.go` | Blocker | `launch` now wraps the parent background context, ignoring the request-scoped context; call-site cancellations no longer stop goroutines. | Use `context.WithCancel(ctx)` (or `context.WithCancelCause`) so instance launch obeys caller cancellation. |
| aae0057de859f99e | `internal/infra/server/http`<br>`internal/app/provider/manager.go` | Blocker | New HTTP routes invoke `provider.Manager.Create`, but manager in this revision exposes only `addProvider`; build logic also still expects the old `exchange` key, producing both compile- and runtime failures. | Implement the new API surface in the manager (Create/Update/Remove) before wiring the server, or keep the server using the existing helper. |
| 2ea22b59baf85921 | `internal/app/provider/manager.go` | Blocker | `StartProvider` now ignores the request context, so failed starts cannot be canceled and goroutines leak. | Pass the caller context into `context.WithCancel` so provider lifecycles respect upstream cancellations. |
| bf50e5895c530a98 | `internal/infra/adapters/okx/ws_manager.go` | Major | Private WS login serializes JSON into `wsArgument.Channel` and drops marshal errors, bypassing type safety and risking malformed auth payloads. | Send login requests as structured frames (avoid embedding raw JSON strings) and handle `json.Marshal` failures explicitly. |
