# Meltica application configuration example.

# environment: deployment environment (dev | staging | prod)
environment: prod

providers:
  # fake: synthetic market-data provider (alias pointing to the "fake" exchange)
  fake:
    exchange:
      name: fake
      enabled: true
      ticker_interval: 500ms
      trade_interval: 1s
      book_snapshot_interval: 5s
      balance_update_interval: 3s

  # fake-slow: alias with different cadence but the same underlying exchange implementation
  fake-slow:
    exchange:
      name: fake
      ticker_interval: 750ms
      trade_interval: 2s
      book_snapshot_interval: 10s
      balance_update_interval: 6s

  # bnx/binance/BINANCE: demonstrate aliases mapping to the real Binance exchange
  bnx:
    exchange:
      name: binance
      venue: spot
  binance:
    exchange:
      name: binance
      venue: spot
  BINANCE:
    exchange:
      name: binance
      venue: futures

# eventbus: in-memory event bus configuration
eventbus:
  bufferSize: 2048
  fanoutWorkers: 8

# pools: configure object pool capacities
pools:
  event:
    size: 50000
    waitQueueSize: 50000
  orderRequest:
    size: 10000
    waitQueueSize: 10000

risk:
  maxPositionSize: "250"
  maxNotionalValue: "50000"
  notionalCurrency: "USDT"
  orderThrottle: 5
  orderBurst: 3
  maxConcurrentOrders: 8
  priceBandPercent: 1.0
  allowedOrderTypes:
    - Limit
    - Market
  killSwitchEnabled: true
  maxRiskBreaches: 5
  circuitBreaker:
    enabled: true
    threshold: 6
    cooldown: 90s

# apiServer: control API bind address (host:port or :port)
apiServer:
  addr: ":8880"

# telemetry: OTLP exporter configuration
telemetry:
  otlpEndpoint: http://localhost:4318
  serviceName: meltica-gateway
  otlpInsecure: true
  enableMetrics: true

# lambdaManifest: inline lambda definitions that will be materialised at startup
lambdaManifest:
  lambdas:
    - id: lambda-fake-btc
      provider_symbols:
        fake:
          symbols:
            - BTC-USDT
      strategy: delay
      config:
        dry_run: true
        min_delay: "250ms"
        max_delay: "750ms"
      auto_start: true
    - id: lambda-fake-btc-logger
      provider_symbols:
        fake:
          symbols:
            - BTC-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-slow-eth
      provider_symbols:
        fake-slow:
          symbols:
            - ETH-USDT
      strategy: delay
      config:
        dry_run: true
        min_delay: "250ms"
        max_delay: "750ms"
      auto_start: true
    - id: lambda-fake-eth-noop
      provider_symbols:
        fake:
          symbols:
            - ETH-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-xrp
      provider_symbols:
        fake:
          symbols:
            - XRP-USDT
      strategy: delay
      config:
        dry_run: true
        min_delay: "250ms"
        max_delay: "750ms"
      auto_start: true
    - id: lambda-fake-xrp-noop
      provider_symbols:
        fake:
          symbols:
            - XRP-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-sol-1
      providers:
        - fake
      symbol: SOL-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-sol-2
      provider_symbols:
        fake:
          symbols:
            - SOL-USDT
      strategy: delay
      config:
        dry_run: true
        min_delay: "250ms"
        max_delay: "750ms"
      auto_start: true
    - id: lambda-fake-sol-3
      provider_symbols:
        fake:
          symbols:
            - SOL-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-sol-4
      provider_symbols:
        fake:
          symbols:
            - SOL-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-sol-logger
      provider_symbols:
        fake:
          symbols:
            - SOL-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-ada
      provider_symbols:
        fake:
          symbols:
            - ADA-USDT
      strategy: delay
      config:
        dry_run: true
        min_delay: "250ms"
        max_delay: "750ms"
      auto_start: true
    - id: lambda-fake-ada-logger
      provider_symbols:
        fake:
          symbols:
            - ADA-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-doge
      provider_symbols:
        fake:
          symbols:
            - DOGE-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-doge-logger
      provider_symbols:
        fake:
          symbols:
            - DOGE-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-bnb
      provider_symbols:
        fake:
          symbols:
            - BNB-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-bnb-noop
      provider_symbols:
        fake:
          symbols:
            - BNB-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-ltc
      provider_symbols:
        fake:
          symbols:
            - LTC-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-ltc-logger
      provider_symbols:
        fake:
          symbols:
            - LTC-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-dot
      provider_symbols:
        fake:
          symbols:
            - DOT-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-dot-noop
      provider_symbols:
        fake:
          symbols:
            - DOT-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-avax
      provider_symbols:
        fake:
          symbols:
            - AVAX-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
    - id: lambda-fake-avax-logger
      provider_symbols:
        fake:
          symbols:
            - AVAX-USDT
      strategy: delay
      config:
        dry_run: true
      auto_start: true
